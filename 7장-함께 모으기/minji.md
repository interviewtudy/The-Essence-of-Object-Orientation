# 함께 모으기

- 개념 관점에서의 설계: 도메인 안에 존재하는 개념들 사이 관계를 표현. 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심
- 명세 관점에서의 설계: 도메인을 벗어나 소프트웨어로 초점이 옮겨져, 객체가 협력을 위해 무엇을 할 수 있는지가 핵심
- 구현 관점에서의 설계: 객체의 책임을 어떻게 수행할 것인가에 초점을 맞춰 인터페이스를 구현하는 데 필요한 속성가 메서드를 클래스에 추가
- 개념 -> 명세 -> 구현 관점의 순서대로 소프트웨어를 개발하는 것이 아니라 동일한 클래스를 세 가지 관점에서 바라보는 것

## 커피 전문점 도메인

### 커피 전문점이라는 세상

- 커피 전문점 객체들
  - 메뉴판
  - 메뉴 항목
  - 손님
  - 바리스타
  - 커피
- 객체 사이 관계
  - 손님 - 메뉴판: 주문할 커피 선택
  - 손님 - 바리스타: 주문
  - 바리스타 - 커피: 커피 제조
- 추상화
  - 손님 객체 -> 손님 타입의 인스턴스
  - 바리스타 객체 -> 바리스타 타입의 인스턴스
  - 아메리카노, 에스프레소, 카라멜 마끼아또, 카푸치노 객체 -> 커피 타입의 인스턴스
  - 메뉴판 객체 -> 메뉴판 타입의 인스턴스
  - 메뉴 항목 객체 -> 메뉴 항목 타입의 인스턴스
- 타입 간 관계(합성 관계: 한 타입의 인스턴스가 다른 타입의 인스턴스 포함 / 연관 관계: 포함하진 않지만 서로 알고 있어야 함)
  - 하나의 메뉴판 객체는 다수의 메뉴 항목 객체로 구성(메뉴판 타입과 메뉴 항목 타입 간의 합성 관계)
  - 손님 타입은 메뉴판 타입을 알야아 함(손님 타입과 메뉴판 타입의 연관 관계)
  - 바리스타 타입은 커피 타입을 알아야 함(바리스타 타입과 커피 타입의 연관 관계)
  - 손님은 바리스타에게 주문함(바리스타 타입과 손님 타입의 연관 관계)

## 설계하고 구현하기

### 커피를 주문하기 위한 협력 찾기

1. 메시지 찾기

- 첫 번쨰 메시지: 커피를 주문하라(메뉴 이름)
- 메뉴 이름은 메시지 인자

2. 메시지 처리 객체 선정

- 커피를 주문할 책임을 져야하는 객체: 손님

3. 객체가 스스로할 수 없는 일을 생각

- 손님은 메뉴 항목을 모름 -> 새로운 메시지 정의: 메뉴 항목을 찾아라(메뉴 이름) & 반환값: 메뉴 항목 -> 메시지 처리 객체 선정: 메뉴판
- 손님은 메뉴 항목에 맞는 커피를 제조해달라고 해아 함 -> 새로운 메시지 정의: 커피를 제조하라(메뉴 항목) & 반환값: 커피 -> 메시지 처리 객체 선정: 바리스타
- 바리스타는 새 커피를 생성해야 함 -> 새로운 메시지 정의: 생성하라 -> 메시지 처리 객체 선정: 커피

+) UML 2.0 표준에서는 협력을 표현하기 위한 용도로 커뮤니케이션 다이어그램을 제공하지만, 의사소통이라는 목적에 부합한다면 용도에 맞게 얼마든지 UML을 수정하고 뒤틀 수 있음

### 인터페이스 정리하기

- 객체가 수신한 메시지가 객체의 인터페이스를 결정함
- 객체들의 협력은 실행 시간에 컴퓨터 안에서 일어나는 상황을 동적으로 묘사한 모델이고 실제 소프트웨어의 구현은 동적인 객체가 아닌 정적인 타입을 이용해 이뤄짐
- 객체의 타입을 구현하는 일반적인 방법은 클래스를 이용하는 것

### 구현하기

- 오퍼레이션을 수행하는 방법을 메서드로 구현
- 객체가 다른 객체에게 메시지를 전송하기 위해서는 먼저 객체에 대한 참조를 얻어야 함(메서드의 인자로 전달 받는 등 다양한 방법이 있음)

## 코드의 세 가지 관점

### 코드는 세 가지 관점을 모두 제공해야 한다

- 개념 관점: Customer, Menu.. 등의 클래스
- 명세 관점: 클래스의 인터페이스
- 구현 관점: 클래스의 메서드와 속성(메서드의 구현과 속성의 변경은 원칙적으로 외부의 객체에 영향을 미쳐선 안됨. 하지만 현실적으론 불가능한 경우도 존재)

### 도메인 개념을 참조하는 이유

- 메시지를 수신할 객체를 선택할 땐 도메인 개념 중에서 가장 적절한 것을 선택하여 변경 시 보다 수월하게 수정할 수 있도록 함

### 인터페이스와 구현을 분리하라

- 명세 관점과 구현 관점이 뒤섞이지 않도록 해야 함
- 훌륭한 설계를 결정하는 측면은 명세 관점
